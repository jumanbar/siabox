% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/basicas.R
\name{ancho}
\alias{ancho}
\title{Formato ancho}
\usage{
ancho(.data, unidades = FALSE)
}
\arguments{
\item{.data}{Tabla de datos obtenida con \code{\link{consulta_muestras}},
posiblemente modificada con valores_numericos y con columnas agregadas por
\code{\link[dplyr:mutate-joins]{left_join}}.}

\item{unidades}{TRUE o FALSE. Determina si se agregan las unidades a las
columnas de los parámetros (ej.: 'SatO (\%)' en lugar de 'SatO')}
}
\value{

}
\description{
Ensanchar datos provenientes de consulta_muestras. Espera la presencia de
ciertas columnas y una sóla matriz ambiental. Ver detalles.
}
\details{
Espera que existan las columnas \code{valor} y \code{param}. En caso
de no encontrarlas las creará a partir de las columnas
\code{valor_minimo_str} y \code{nombre_clave}, respectivamente, si es que
están presentes. La primera contiene los valores de los parámetros
muestreados, ya sea en formato numérico o en texto. La segunda debería
contener el código del parámetro.

Para facilitar la compatibilidad, esta función además verifica la presencia
de otras columnas agregadas en el código de la app iSIA (en el reactive
\code{datos_extraccion}, del server.R): parametro, grupo, id_tipo_dato y
tipo_dato.
}
\examples{
d <- filtrar_datos(datos_sia,
                   id_programa = 10L,
                   rango_fechas = c("2019-01-01", "2020-12-31"),
                   id_parametro = c(2099, 2098)) \%>\%
  dplyr::select(codigo_pto, fecha_muestra, id_parametro, param, id_unidad,
                uni_nombre, limite_deteccion, limite_cuantificacion, valor)
print(d)
ancho(d)

# CÃ³mo usar ancho en lugar de ancho_old:
datos_sia \%>\%
  # Primero filtrar para tener sÃ³lo 2 parÃ¡metros:
  dplyr::filter(id_programa == 4, id_parametro \%in\% c(2017, 2021)) \%>\%
  ancho \%>\%
  dplyr::select(SatO, OD) \%>\%
  plot
}
